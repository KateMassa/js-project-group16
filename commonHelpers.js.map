{"version":3,"file":"commonHelpers.js","sources":["../src/js/header.js","../src/js/fetchAPI.js","../src/js/bookCardTemplate.js","../src/js/renderCategory.js","../src/js/bestsellers.js","../src/js/home.js"],"sourcesContent":["const menu = document.getElementById('burger-menu');\n\nconst onOpen = () => {\n  menu.classList.add('is-open');\n};\n\nconst onClose = () => {\n  menu.classList.remove('is-open');\n};\n\n// Theme switcher in header\n\nconst themeSwitch = document.getElementById('themeSwitch');\n\nthemeSwitch.addEventListener('change', function () {\n  const logoIcon = document.querySelector('.logo-icon use');\n  if (this.checked) {\n    logoIcon.setAttribute('href', './img/icons.svg#icon-logo-dark');\n  } else {\n    logoIcon.setAttribute('href', './img/icons.svg#icon-logo-light');\n  }\n});\n\n// When loading the page, we check the saved topic\nwindow.addEventListener('DOMContentLoaded', function () {\n  const currentTheme = localStorage.getItem('theme');\n  if (currentTheme) {\n    document.body.classList.add(currentTheme);\n    if (currentTheme === 'dark-theme') {\n      themeSwitch.checked = true;\n    }\n  }\n});\n\n// When the switch state changes\nthemeSwitch.addEventListener('change', function () {\n  if (this.checked) {\n    document.body.classList.add('dark-theme');\n    document.body.classList.remove('light-theme');\n    localStorage.setItem('theme', 'dark-theme');\n  } else {\n    document.body.classList.remove('dark-theme');\n    document.body.classList.add('light-theme');\n    localStorage.setItem('theme', 'light-theme');\n  }\n});\n","import axios from 'axios';\n\nexport class BooksApi {\n  constructor() {\n    this.BASE_URL = 'https://books-backend.p.goit.global/books';\n    this.TOP_BOOKS_ENDPOINT = '/top-books';\n    this.CATEGORY_ENDPOINT = '/category?category=';\n    this.CATEGORY_LIST_ENDPOINT = '/category-list';\n  }\n\n  //==== Метод на отримання книг-бестселлерів\n  async getTopBooks() {\n    try {\n      const url = `${this.BASE_URL}${this.TOP_BOOKS_ENDPOINT}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching popular books:', error);\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання книг за категорією\n  async getBooksByCategory(selectedCategory) {\n    try {\n      const url = `${this.BASE_URL}${this.CATEGORY_ENDPOINT}${selectedCategory}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        `Error fetching books for category '${selectedCategory}':`,\n        error\n      );\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання додаткової інформації про книгу за id\n  async getDetails(bookId) {\n    try {\n      const url = `${this.BASE_URL}/${bookId}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        `Error fetching details for book with ID '${bookId}':`,\n        error\n      );\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання списку категорій книг\n  async getCategoryList() {\n    try {\n      const url = `${this.BASE_URL}${this.CATEGORY_LIST_ENDPOINT}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching category list:', error);\n      throw error;\n    }\n  }\n}\n","// ==== Функція на відмальовку картки з книгою\nexport function createBookCard(elem, i) {\n    let book = `<li class='gallery-book-item' data-bookid=\"${elem.books[i]._id}\">\n        <a class=\"gallery-book-link\">\n        <div class=\"preview js-open-modal\">\n          <img class=\"gallery-book-img\" data-id=\"${elem.books[i]._id}\" src=\"${elem.books[i].book_image}\" alt=\"${elem.books[i].title}\">\n          <div class=\"actions-card\">\n        <p class=\"action-text\">quick view</p>\n          </div>\n        </div>\n          <div class=\"content\">\n            <h3 class=\"gallery-book-name\">${elem.books[i].title}</h3>\n            <h4 class=\"gallery-book-text\">${elem.books[i].author}</h4>\n          </div>\n        </a>\n    </li>`;\n\n    return book;\n}","import { BooksApi } from \"./fetchAPI\";\n\nconst booksApi = new BooksApi;\n\nexport const elements = {\n  bookList: document.querySelector('.book-list'),\n  topBooksList: document.querySelector('.top-books-list'),\n  booksTitleContainer: document.querySelector('.books-title-container')\n};\n\n\n//=== Функція попередньо очищує контент каталогу книг та дістає книги за обраною категорією\nexport function renderCategory(categoryName) {\n    elements.topBooksList.innerHTML = '';\n    elements.booksTitleContainer.innerHTML = '';\n\n    const categoryTitle = document.createElement('h2');\n    categoryTitle.textContent = categoryName;\n    elements.booksTitleContainer.appendChild(categoryTitle);\n\n    booksApi.getBooksByCategory(categoryName)\n        .then(data => dataCategory(data))\n        .catch(error => console.error('Error fetching top books:', error));\n}\n\n// ==== Функція на відмальовку книг за категорією\nfunction dataCategory(data) {\n\n    const booksMarkup = data.map(book =>\n        `<li class='gallery-book-item' data-bookid=\"${book._id}\">\n        <a class=\"gallery-book-link\">\n            <div class=\"preview\">\n            <img class=\"gallery-book-img\" data-id=\"${book._id}\" src=\"${book.book_image}\" alt=\"${book.title}\">\n            <div class=\"actions-card\">\n                <p class=\"action-text\">quick view</p>\n            </div>\n            </div>\n            <div class=\"content\">\n            <h3 class=\"gallery-book-name\">${book.title}</h3>\n            <h4 class=\"gallery-book-text\">${book.author}</h4>\n            </div>\n        </a>\n        </li>`\n        ).join('');\n\n    elements.bookList.innerHTML = booksMarkup;\n}","import { BooksApi } from './fetchAPI';\nimport { createBookCard } from \"./bookCardTemplate\";\nimport { elements } from \"./renderCategory\";\n\nconst booksApi = new BooksApi();\n\nexport function renderBestsellers() {\n  //====== Записуємо кількість книг до відмальовки з результату функції\n  let limit = calculateLimit(window.innerWidth);\n\n  //===== Запитуємо книги з серверу, передаємо дані в функцію і відмальовуємо\n  booksApi\n    .getTopBooks()\n    .then(data => dataBestsellers(data, limit))\n    .catch(error => console.error('Error fetching top books:', error));\n}\n\n//==== Вираховуємо кількіть книг до відмальовки, в залежності від ширини екрану\nfunction calculateLimit(screenWidth) {\n  if (screenWidth >= 1280) {\n    return 5;\n  } else if (screenWidth >= 768) {\n    return 3;\n  } else {\n    return 1;\n  }\n}\n\n// ==== Функція на відмальовку бестселлерів\nfunction dataBestsellers(data, limit) {\n\n  elements.topBooksList.innerHTML = '';\n  elements.booksTitleContainer.innerHTML = '';\n\n  const dataBestsellers = data\n    .map(elem => {\n      let cardStarterMarkup = `<li><h2 class=\"gallery-title\">${elem.list_name}</h2>\n    <ul class=\"gallery-book-list\" data-filter=\"${elem.list_name}\">`;\n      let booksArray = [];\n\n      for (let i = 0; i < limit && i < elem.books.length; i++) {\n        let book = createBookCard(elem, i);\n        booksArray.push(book);\n      }\n\n      const seeMoreBtn = `<button class=\"see-more-btn\" data-filter=\"${elem.list_name}\" type=\"button\">See More</button>`;\n      const booksTemplate = booksArray.join(' ');\n      const categoryMarkup = cardStarterMarkup + booksTemplate + '</ul>' + seeMoreBtn + '</li>';\n      return categoryMarkup;\n    })\n    .join(' ');\n\n  elements.topBooksList.innerHTML = dataBestsellers;\n\n  const dataMarkupTitle = `<h2 class=\"top-books-title\">Best Sellers <span class=\"colortext\">Books</span></h2>`;\n  elements.booksTitleContainer.innerHTML = dataMarkupTitle;\n\n  onSeeMoreBtn();\n}\n\n// === Додаємо слухача подій на кожну кнопку наприкінці категорій книг\nfunction onSeeMoreBtn() {\n  const seeMoreBtns = document.querySelectorAll('.see-more-btn');\n  seeMoreBtns.forEach(btn => {\n    btn.addEventListener('click', onFiltred);\n  });\n}\n\n// === Функція опрацювання кліку\nasync function onFiltred(event) {\n  event.preventDefault();\n  // === Ховаємо всі категорії\n  const allCategories = document.querySelectorAll('.gallery-book-list');\n  allCategories.forEach(category => {\n    category.style.display = 'none';\n  });\n  let categoryName = event.target.dataset['filter'];\n  // === Відображаємо тільки вибрану категорію\n  const selectedCategory = document.querySelector(`ul[data-filter=\"${categoryName}\"]`);\n  selectedCategory.style.display = 'block';\n  \n  // === Видаляємо решту категорій\n  const allCategoryItems = document.querySelectorAll('.top-books-list > li');\n  allCategoryItems.forEach(item => {\n    if (item.querySelector(`ul[data-filter=\"${categoryName}\"]`) === null) {\n      item.remove();\n    }\n  });\n\n  // === Шукаємо і ховаємо кнопку в обраній категорії\n  const selectedCategoryBtn = selectedCategory.parentElement.querySelector('.see-more-btn');\n  selectedCategoryBtn.style.display = 'none';\n\n  if (categoryName !== 'Best Sellers Books') {\n    const booksByCategory = await booksApi.getBooksByCategory(categoryName);\n    renderMoreBooks(booksByCategory, categoryName);\n  }\n\n}\n\n// === Функція відмальовує книги обраної категорії\nfunction renderMoreBooks(books, dataAttr) {\n  const categoryContainer = document.querySelector(`ul[data-filter=\"${dataAttr}\"]`);\n\n  const booksMarkup = books.map(book => `\n    <li class='gallery-book-item' data-bookid=\"${book._id}\">\n      <a class=\"gallery-book-link\">\n        <div class=\"preview\">\n          <img class=\"gallery-book-img\" data-id=\"${book._id}\" src=\"${book.book_image}\" alt=\"${book.title}\">\n          <div class=\"actions-card\">\n            <p class=\"action-text\">quick view</p>\n          </div>\n        </div>\n        <div class=\"content\">\n          <h3 class=\"gallery-book-name\">${book.title}</h3>\n          <h4 class=\"gallery-book-text\">${book.author}</h4>\n        </div>\n      </a>\n    </li>`\n  ).join('');\n\n  categoryContainer.innerHTML = booksMarkup;\n\n}\n\n//===== Зміна кількості книг до відмальовки при зміні ширини екрану\nwindow.addEventListener('resize', () => {\n  let limit = calculateLimit(window.innerWidth);\n  renderBestsellers(limit);\n});\n","import { renderBestsellers } from './bestsellers.js'\n\nrenderBestsellers();"],"names":["themeSwitch","logoIcon","currentTheme","BooksApi","url","axios","error","selectedCategory","bookId","createBookCard","elem","i","elements","booksApi","renderBestsellers","limit","calculateLimit","data","dataBestsellers","screenWidth","cardStarterMarkup","booksArray","book","seeMoreBtn","booksTemplate","dataMarkupTitle","onSeeMoreBtn","btn","onFiltred","event","category","categoryName","item","selectedCategoryBtn","booksByCategory","renderMoreBooks","books","dataAttr","categoryContainer","booksMarkup"],"mappings":"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"}
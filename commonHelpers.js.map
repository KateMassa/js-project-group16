{"version":3,"file":"commonHelpers.js","sources":["../src/js/fetchAPI.js","../src/js/bestsellers.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport class BooksApi {\n  constructor() {\n    this.BASE_URL = 'https://books-backend.p.goit.global/books';\n    this.TOP_BOOKS_ENDPOINT = '/top-books';\n    this.CATEGORY_ENDPOINT = '/category?category=';\n    this.CATEGORY_LIST_ENDPOINT = '/category-list';\n  }\n\n  //==== Метод на отримання книг-бестселлерів\n  async getTopBooks() {\n    try {\n      const url = `${this.BASE_URL}${this.TOP_BOOKS_ENDPOINT}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching popular books:', error);\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання книг за категорією\n  async getBooksByCategory(selectedCategory) {\n    try {\n      const url = `${this.BASE_URL}${this.CATEGORY_ENDPOINT}${selectedCategory}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        `Error fetching books for category '${selectedCategory}':`,\n        error\n      );\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання додаткової інформації про книгу за id\n  async getDetails(bookId) {\n    try {\n      const url = `${this.BASE_URL}/${bookId}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error(\n        `Error fetching details for book with ID '${bookId}':`,\n        error\n      );\n      throw error;\n    }\n  }\n\n  //==== Метод на отримання списку категорій книг\n  async getCategoryList() {\n    try {\n      const url = `${this.BASE_URL}${this.CATEGORY_LIST_ENDPOINT}`;\n      const response = await axios.get(url);\n\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching category list:', error);\n      throw error;\n    }\n  }\n}\n","import { BooksApi } from './fetchAPI';\n\nconst booksApi = new BooksApi();\nconst topBooksList = document.querySelector('.top-books-list');\nconst booksTitleContainer = document.querySelector('.books-title-container');\n\nexport function renderBestsellers() {\n  //====== Записуємо кількість книг до відмальовки з результату функції\n  let limit = calculateLimit(window.innerWidth);\n\n  //===== Запитуємо книги з серверу, передаємо дані в функцію і відмальовуємо\n  booksApi\n    .getTopBooks()\n    .then(data => dataBestsellers(data, limit))\n    .catch(error => console.error('Error fetching top books:', error));\n}\n\n//==== Вираховуємо кількіть книг до відмальовки, в залежності від ширини екрану\nfunction calculateLimit(screenWidth) {\n  if (screenWidth >= 1440) {\n    return 5;\n  } else if (screenWidth >= 768) {\n    return 3;\n  } else {\n    return 1;\n  }\n}\n\n// ==== Функція на відмальовку бестселлерів\nfunction dataBestsellers(data, limit) {\n  topBooksList.innerHTML = '';\n  const dataBestsellers = data\n    .map(elem => {\n      let cardStarterMarkup = `<li><h2 class=\"gallery-title\">${elem.list_name}</h2>\n    <ul class=\"gallery-book-list\" data-filter=\"${elem.list_name}\">`;\n      let booksArray = [];\n      for (let i = 0; i < limit && i < elem.books.length; i++) {\n        let book = `<li class='gallery-book-item' data-bookid=\"${elem.books[i]._id}\">\n        <a class=\"gallery-book-link\">\n        <div class=\"preview\">\n          <img class=\"gallery-book-img\" data-id=\"${elem.books[i]._id}\" src=\"${elem.books[i].book_image}\" alt=\"${elem.books[i].title}\">\n          <div class=\"actions-card\">\n        <p class=\"action-text\">quick view</p>\n          </div>\n        </div>\n          <div class=\"content\">\n            <h3 class=\"gallery-book-name\">${elem.books[i].title}</h3>\n            <h4 class=\"gallery-book-text\">${elem.books[i].author}</h4>\n          </div>\n        </a>\n      </li>`;\n        booksArray.push(book);\n      }\n\n      const booksTemplate = booksArray.join(' ');\n      return cardStarterMarkup + booksTemplate + '</ul>' + '' + '</li>';\n    })\n    .join(' ');\n\n  topBooksList.innerHTML = dataBestsellers;\n  const dataMarkupTitle = `<h2 class=\"top-books-title\">Best Sellers <span class=\"colortext\">Books</span></h2>`;\n  booksTitleContainer.innerHTML = dataMarkupTitle;\n}\n\n//===== Зміна кількості книг до відмальовки при зміні ширини екрану\nwindow.addEventListener('resize', () => {\n  let limit = calculateLimit(window.innerWidth);\n  renderBestsellers(limit);\n});\n","// === Відображення блоку книг бестселлерів\n\nimport { renderBestsellers } from './js/bestsellers';\nrenderBestsellers();\n"],"names":["BooksApi","url","axios","error","selectedCategory","bookId","booksApi","topBooksList","booksTitleContainer","renderBestsellers","limit","calculateLimit","data","dataBestsellers","screenWidth","elem","cardStarterMarkup","booksArray","i","book","booksTemplate","dataMarkupTitle"],"mappings":"svBAEO,MAAMA,CAAS,CACpB,aAAc,CACZ,KAAK,SAAW,4CAChB,KAAK,mBAAqB,aAC1B,KAAK,kBAAoB,sBACzB,KAAK,uBAAyB,gBAC/B,CAGD,MAAM,aAAc,CAClB,GAAI,CACF,MAAMC,EAAM,GAAG,KAAK,QAAQ,GAAG,KAAK,kBAAkB,GAGtD,OAFiB,MAAMC,EAAM,IAAID,CAAG,GAEpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,gCAAiCA,CAAK,EAC9CA,CACP,CACF,CAGD,MAAM,mBAAmBC,EAAkB,CACzC,GAAI,CACF,MAAMH,EAAM,GAAG,KAAK,QAAQ,GAAG,KAAK,iBAAiB,GAAGG,CAAgB,GAGxE,OAFiB,MAAMF,EAAM,IAAID,CAAG,GAEpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MACN,sCAAsCC,CAAgB,KACtDD,CACR,EACYA,CACP,CACF,CAGD,MAAM,WAAWE,EAAQ,CACvB,GAAI,CACF,MAAMJ,EAAM,GAAG,KAAK,QAAQ,IAAII,CAAM,GAGtC,OAFiB,MAAMH,EAAM,IAAID,CAAG,GAEpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MACN,4CAA4CE,CAAM,KAClDF,CACR,EACYA,CACP,CACF,CAGD,MAAM,iBAAkB,CACtB,GAAI,CACF,MAAMF,EAAM,GAAG,KAAK,QAAQ,GAAG,KAAK,sBAAsB,GAG1D,OAFiB,MAAMC,EAAM,IAAID,CAAG,GAEpB,IACjB,OAAQE,EAAO,CACd,cAAQ,MAAM,gCAAiCA,CAAK,EAC9CA,CACP,CACF,CACH,CCjEA,MAAMG,EAAW,IAAIN,EACfO,EAAe,SAAS,cAAc,iBAAiB,EACvDC,EAAsB,SAAS,cAAc,wBAAwB,EAEpE,SAASC,GAAoB,CAElC,IAAIC,EAAQC,EAAe,OAAO,UAAU,EAG5CL,EACG,YAAa,EACb,KAAKM,GAAQC,EAAgBD,EAAMF,CAAK,CAAC,EACzC,MAAMP,GAAS,QAAQ,MAAM,4BAA6BA,CAAK,CAAC,CACrE,CAGA,SAASQ,EAAeG,EAAa,CACnC,OAAIA,GAAe,KACV,EACEA,GAAe,IACjB,EAEA,CAEX,CAGA,SAASD,EAAgBD,EAAMF,EAAO,CACpCH,EAAa,UAAY,GACzB,MAAMM,EAAkBD,EACrB,IAAIG,GAAQ,CACX,IAAIC,EAAoB,iCAAiCD,EAAK,SAAS;AAAA,iDAC5BA,EAAK,SAAS,KACrDE,EAAa,CAAA,EACjB,QAASC,EAAI,EAAGA,EAAIR,GAASQ,EAAIH,EAAK,MAAM,OAAQG,IAAK,CACvD,IAAIC,EAAO,8CAA8CJ,EAAK,MAAMG,CAAC,EAAE,GAAG;AAAA;AAAA;AAAA,mDAG/BH,EAAK,MAAMG,CAAC,EAAE,GAAG,UAAUH,EAAK,MAAMG,CAAC,EAAE,UAAU,UAAUH,EAAK,MAAMG,CAAC,EAAE,KAAK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CAMvFH,EAAK,MAAMG,CAAC,EAAE,KAAK;AAAA,4CACnBH,EAAK,MAAMG,CAAC,EAAE,MAAM;AAAA;AAAA;AAAA,aAIxDD,EAAW,KAAKE,CAAI,CACrB,CAED,MAAMC,EAAgBH,EAAW,KAAK,GAAG,EACzC,OAAOD,EAAoBI,EAAgB,YACjD,CAAK,EACA,KAAK,GAAG,EAEXb,EAAa,UAAYM,EACzB,MAAMQ,EAAkB,qFACxBb,EAAoB,UAAYa,CAClC,CAGA,OAAO,iBAAiB,SAAU,IAAM,CAEtCZ,EAAuB,CACzB,CAAC,ECjEDA,EAAmB"}
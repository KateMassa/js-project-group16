{"version":3,"file":"commonHelpers.js","sources":["../src/js/render.js"],"sourcesContent":["import BookAPI from \"./fetchAPI\";\n\nexport const categoryList = document.querySelector('.category-list'),\n  galleryList = document.querySelector('.gallery-list'),\n  allCategories = document.querySelector('#all-categories'),\n  categoryName = document.querySelector('.category-title');\n\nconst bookAPI = new BookAPI();\n\nasync function showCategoryList() {\n  try {\n    const response = await bookAPI.fetchCategories();\n    renderCategory(response);\n    allCategories.classList.add('active');\n  } catch (error) {\n    console.log(\"Failed to render show category list:\", error);\n  }\n}\n\nshowCategoryList();\n\nasync function showAllCategories() {\n  document.querySelectorAll('.category-list-item').forEach(item => item.classList.remove('active'));\n  try {\n    const response = await bookAPI.fetchTopCategories();\n    for (let i = 0; i < 4; i++) {\n      renderListGroup(response[i]);\n    }\n    const highlightCategory = document.querySelector('.category-list-item');\n    highlightCategory.classList.add('active'); //highlight all categories category item\n\n  } catch (error) {\n    console.error(\"Failed to fetch all categories:\", error);\n  }\n  document.querySelectorAll('.see-more-btn').forEach(\n    item => item.addEventListener('click', renderPageByCategory)\n  );\n}\n\nshowAllCategories();\n\nfunction renderCategory(data) {\n  const markup = data.map(({ list_name }) => {\n    return `\n        <li class=\"category-list-item\">\n            <h4 class=\"category-name\">${list_name}</h4>\n        </li>`;\n  }).join('');\n  categoryList.innerHTML += markup;\n}\n\nfunction renderBooks(data) {\n  const markup = data.map(({ _id, book_image, author, title }) => {\n    return `\n        <li class=\"gallery-item\" id=\"${_id}\">\n            <img src=\"${book_image}\" alt=\"\" class=\"book-cover\" />\n            <h3 class=\"book-title\">${isCorrectTextLength(title)}</h3>\n            <h5 class=\"book-author\">${isCorrectTextLength(author)}</h5>\n        </li>`\n  }).join('');\n  return markup;\n}\n\nfunction renderListGroup(data) {\n  const categoryTitle = 'Best Sellers Books';\n  renderCategoryTitleByColors(categoryTitle);\n\n  const { list_name, books } = data;\n  const markup = `\n    <li class=\"gallery-list-group\">\n      <h3 class=\"list-group-name\">${list_name}</h3>\n        <ul class=\"gallery-list-item\">\n          ${renderBooks(books)}\n        </ul>\n      <button class=\"see-more-btn\">See more</button>\n    </li>`;\n  galleryList.innerHTML += markup;\n}\n\nfunction renderListByCategory(data) {\n  const categoryTitle = data[0].list_name; //беремо назву категорії у першого елемента\n  renderCategoryTitleByColors(categoryTitle);\n  const markup = renderBooks(data);\n  galleryList.innerHTML = markup;\n}\n\nasync function renderPageByCategory(e) {\n  const categoryName = e.target.closest('li').children[0].textContent;\n\n  try {\n    const response = await bookAPI.fetchBooksByCategory(categoryName);\n    galleryList.innerHTML = '';\n\n    if (response.length != 0) {\n      galleryList.style.cssText = 'flex-direction: row; flex-wrap: wrap';\n      renderListByCategory(response);\n      document.querySelectorAll('.category-list-item').forEach(item => item.classList.remove('active'));\n    } else {\n      showAllCategories();\n    }\n    e.target.closest('li').classList.add('active'); //highlight category name\n  } catch (error) {\n    console.error(\"Failed to render page by category:\", error);\n  }\n}\n\nfunction isCorrectTextLength(text) {\n  const maximumSymbolsCount = 15;\n  return (text.length >= maximumSymbolsCount) ? `${text.slice(0, maximumSymbolsCount)}...` : text;\n}\n\nfunction renderCategoryTitleByColors(categoryTitle) {\n  let arrayFromBlackWords = categoryTitle.split(' ');\n  const blueWord = arrayFromBlackWords[arrayFromBlackWords.length - 1];\n  arrayFromBlackWords = arrayFromBlackWords.slice(0, arrayFromBlackWords.length - 1);\n  const blackWords = arrayFromBlackWords.join(' ');\n\n  categoryName.textContent = `${blackWords}`;\n  categoryName.nextElementSibling.textContent = `${blueWord}`;\n}\n\n//додаємо обробники подій\ncategoryList.addEventListener('click', renderPageByCategory);\nallCategories.addEventListener('click', showAllCategories);"],"names":["categoryList","galleryList","allCategories","categoryName","bookAPI","BookAPI","showCategoryList","response","renderCategory","error","showAllCategories","item","i","renderListGroup","renderPageByCategory","data","markup","list_name","renderBooks","_id","book_image","author","title","isCorrectTextLength","renderCategoryTitleByColors","books","renderListByCategory","categoryTitle","text","arrayFromBlackWords","blueWord","blackWords"],"mappings":"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"}
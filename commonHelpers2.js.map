{"version":3,"file":"commonHelpers2.js","sources":["../src/img/amazon-default.png","../src/img/book-default.png","../src/img/book-pile.png","../src/js/shopping-list.js"],"sourcesContent":["export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAgCAYAAACcuBHKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOOSURBVHgB7VdLaBRBEH3Vsx/FqFH8hBjBD0TjwQ8oKvhB4kUFRRFvHhU8iuIHD55E/CJe/KF3vQmCoBgRFFGDGC96kKigrmJETSAmu5kua2dms90zszMbSG4paGar+nXX66rqzwLj4gsldfL1fKurhtY5GZ6hWeXByfjoBLooQ7452n1F+/AOIyHBN7GIkb0tP5eJBozQdzwhdFOp1E4H8CmVBF/DYjjZ5+K6EaMtjBKBVtK+4lvTnIngKHcfegwI+JJlxh1pbUReiD1RJmLoam6XsJgHLQGqNA5ajM7a6ONQ0zH2sg5a5F5ztph+LRLEzibWgudyI/+rg8aI6PB0E0e18QYOnNtm+rXSQZoX2Bsg+O1MARbKuEyDTOACvR+BLx3STQZO2pwNwOQFgs8B/QXgR6d8v0XmU6Sba5LQTHli2LLqKGj5QVB+imXm753gB3uF0GegoQW0+QaoZaM9dvAP9MszQNdlP2wVP1ANJsxKB1zRzRzO2wG1+mSEgLemppXi+FZ5RtD2u1ECZck3Qq0/DVq4O1QzrGpGwiPL1XTQpBYkCTWvBU9tA01vS8RhwuygKCt+7JPBJuEqI89RcKxMW5qOKS9O157LIsEu2QkSEqk0VDYN4e80jfpI+HvZ1JEuug5MOBKUSAJ2CuogwfUQDZNQSTWhlc2y3lWmYshenIskEmSTqNdBmmiEdgfSSVQwVK+DNAnSUX0UcG0S3hliJnnUCjO47CpTUuI5YQLYDvXAX3BPt7cUmrPCclAdXwL/Esy/v6BZrcDExuGp/HQEsUjaHRJ+rkbCLyb+2gV97zi48FomGvJ75DimNfuh2o8MR0t3XAS/uALu/x3cZ3LGNK+A2nnZ2PrmhWf4NZXSiRkP5bN5uLNhpkz6RyYoIU5U+zHwjw+gaXOhn16K369iowlTwYO9prUje6qnPTYSwrjPUvt64rgOi350HjR/HfSbO3J9OzVwEs2BPqtPgjJoIuzC1FSotR/Cz11f1+APT+RHJrZAuSYtfDR160pVrO5x8GyrNv9VhJC9qitEx1DsmOrrix+HSFnMqXi46T0Rt2KMRCrkU/7c9/mmzd4dgilqZw/I7UTMS3wUGPQiQ1vDZhU25C5+7XLLkWDqtl7d4cYJr3EdsnkNb5lodf5sIfJPLPFcHjzUtIS0s4pZHqZM2QhjrxqV8a3avDplLhLRT87ws/yFwnuMS4r8B1Xvwi1OZ3iDAAAAAElFTkSuQmCC\"","export default \"__VITE_ASSET__3d9f7203__\"","import Pagination from 'tui-pagination';\nimport { deleteFromLS, loadFromLS } from './localStorage';\n\nimport 'tui-pagination/dist/tui-pagination.css'\n\nimport amazonIcon from '../img/amazon-default.png';\nimport appleIcon from '../img/book-default.png';\nimport booksIcon from '../img/book-pile.png';\n\nconst PAGE_SIZE = 3;\nlet pagination;\n\nfunction getBooksForPage(books, page) {\n  const startIndex = (page - 1) * PAGE_SIZE;\n  const endIndex = startIndex + PAGE_SIZE;\n  return books.slice(startIndex, endIndex);\n}\n\nfunction renderShopList(data) {\n  const shoppingList = document.querySelector('.shopping-list');\n\n  if (!shoppingList) {\n    console.error(\"Element with class 'shopping-list' not found.\");\n    return;\n  }\n\n  shoppingList.innerHTML = '';\n  const defaultMarkup = `<p>This page is empty, add some books and proceed to order.</p>\n          <img\n          class=\"no-book\"\n          src=\"${booksIcon}\"\n          alt=\"Book\"\n          />`;\n  const markup = data\n    .map(\n      ({\n        book_image,\n        title,\n        author,\n        _id,\n        description,\n        list_name,\n        buy_links\n      }) => {\n        let amazonLink;\n        let appleBookLink;\n\n        buy_links.forEach(link => {\n          if (link.name === 'Amazon') {\n            amazonLink = link.url;\n          } else if (link.name === 'Apple Books') {\n            appleBookLink = link.url;\n          }\n        });\n        return `<li class=\"one-book\">\n                  <img\n                      class=\"img-book\"\n                      src=\"${book_image}\"\n                      alt=\"Book\"\n                  />\n                  <div class=\"description\">\n                      <div class=\"up-part\">\n                      <h2 class=\"book-name\">${title}</h2>\n\n                      <button data-id=\"${_id}\" class=\"basket\" type=\"button\">\n                          <svg class=\"trash\" width=\"16\" height=\"16\">\n                          <use href=\"#icon-trash\"></use>\n                          </svg>\n                      </button>\n                      </div>\n                      <h3 class=\"type-name\">${list_name}</h3>\n                      <p class=\"text-description\">\n                      ${description}\n                      </p>\n\n                      <div class=\"book-app\">\n                      <h3 class=\"name-author\">${author}</h3>\n                      <a href=\"${amazonLink}\" target=\"_blank\"><img class=\"amazon\" src=\"${amazonIcon}\" alt=\"amazon\" /></a>\n                      <a href=\"${appleBookLink}\" target=\"_blank\"><img class=\"apple\" src=\"${appleIcon}\" alt=\"apple\" /></a>\n                      </div>\n                  </div>\n                  </li>`;\n      }\n    )\n    .join('');\n\n  shoppingList.innerHTML = data.length > 0 ? markup : defaultMarkup;\n\n  const booksItems = document.querySelectorAll('.shopping-list .basket');\n\n  booksItems.forEach(item => {\n    const bookId = item.getAttribute('data-id');\n    item.addEventListener('click', () => {\n      deleteFromLS(bookId);\n      const updatedBooks = loadFromLS();\n      let currentPage = pagination.getCurrentPage();\n\n      updatePages(updatedBooks.length);\n\n      if ((currentPage - 1) * PAGE_SIZE >= updatedBooks.length) {\n        currentPage -= 1;\n        pagination.movePageTo(currentPage);\n      } else {\n        renderShopList(getBooksForPage(updatedBooks, currentPage));\n      }\n    });\n  });\n}\n\nfunction initPagination(booksCount) {\n  pagination = new Pagination('tui-pagination-container', {\n        totalItems: booksCount,\n        itemsPerPage: PAGE_SIZE,\n        visiblePages: 3,\n        usageStatistics: false\n  });\n\n  updatePages(booksCount);\n  \n  pagination.on('afterMove', function(eventData) {\n    const books = loadFromLS();\n\n    updatePages(books.length);\n    renderShopList(getBooksForPage(books, eventData.page));\n  });\n}\n\nfunction updatePages(booksCount) {\n  const paginationContainer = document.getElementById('tui-pagination-container');\n\n  if (booksCount <= PAGE_SIZE) {\n    paginationContainer.classList.add('hidden');\n  } else {\n    paginationContainer.classList.remove('hidden');\n  }\n\n  pagination.setTotalItems(booksCount);\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const books = loadFromLS();\n\n  initPagination(books.length);\n\n  renderShopList(getBooksForPage(books, 1));\n});\n"],"names":["amazonIcon","appleIcon","booksIcon","PAGE_SIZE","pagination","getBooksForPage","books","page","startIndex","endIndex","renderShopList","data","shoppingList","defaultMarkup","markup","book_image","title","author","_id","description","list_name","buy_links","amazonLink","appleBookLink","link","item","bookId","deleteFromLS","updatedBooks","loadFromLS","currentPage","updatePages","initPagination","booksCount","Pagination","eventData","paginationContainer"],"mappings":"qGAAA,MAAeA,EAAA,ylFCAAC,EAAA,q2CCAAC,EAAA,oDCSTC,EAAY,EAClB,IAAIC,EAEJ,SAASC,EAAgBC,EAAOC,EAAM,CACpC,MAAMC,GAAcD,EAAO,GAAKJ,EAC1BM,EAAWD,EAAaL,EAC9B,OAAOG,EAAM,MAAME,EAAYC,CAAQ,CACzC,CAEA,SAASC,EAAeC,EAAM,CAC5B,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,GAAI,CAACA,EAAc,CACjB,QAAQ,MAAM,+CAA+C,EAC7D,MACD,CAEDA,EAAa,UAAY,GACzB,MAAMC,EAAgB;AAAA;AAAA;AAAA,iBAGPX,CAAS;AAAA;AAAA,cAGlBY,EAASH,EACZ,IACC,CAAC,CACC,WAAAI,EACA,MAAAC,EACA,OAAAC,EACA,IAAAC,EACA,YAAAC,EACA,UAAAC,EACA,UAAAC,CACR,IAAY,CACJ,IAAIC,EACAC,EAEJ,OAAAF,EAAU,QAAQG,GAAQ,CACpBA,EAAK,OAAS,SAChBF,EAAaE,EAAK,IACTA,EAAK,OAAS,gBACvBD,EAAgBC,EAAK,IAEjC,CAAS,EACM;AAAA;AAAA;AAAA,6BAGcT,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA,8CAKOC,CAAK;AAAA;AAAA,yCAEVE,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8CAMEE,CAAS;AAAA;AAAA,wBAE/BD,CAAW;AAAA;AAAA;AAAA;AAAA,gDAIaF,CAAM;AAAA,iCACrBK,CAAU,8CAA8CtB,CAAU;AAAA,iCAClEuB,CAAa,6CAA6CtB,CAAS;AAAA;AAAA;AAAA,wBAI7F,CACF,EACA,KAAK,EAAE,EAEVW,EAAa,UAAYD,EAAK,OAAS,EAAIG,EAASD,EAEjC,SAAS,iBAAiB,wBAAwB,EAE1D,QAAQY,GAAQ,CACzB,MAAMC,EAASD,EAAK,aAAa,SAAS,EAC1CA,EAAK,iBAAiB,QAAS,IAAM,CACnCE,EAAaD,CAAM,EACnB,MAAME,EAAeC,IACrB,IAAIC,EAAc1B,EAAW,iBAE7B2B,EAAYH,EAAa,MAAM,GAE1BE,EAAc,GAAK3B,GAAayB,EAAa,QAChDE,GAAe,EACf1B,EAAW,WAAW0B,CAAW,GAEjCpB,EAAeL,EAAgBuB,EAAcE,CAAW,CAAC,CAEjE,CAAK,CACL,CAAG,CACH,CAEA,SAASE,EAAeC,EAAY,CAClC7B,EAAa,IAAI8B,EAAW,2BAA4B,CAClD,WAAYD,EACZ,aAAc9B,EACd,aAAc,EACd,gBAAiB,EACzB,CAAG,EAED4B,EAAYE,CAAU,EAEtB7B,EAAW,GAAG,YAAa,SAAS+B,EAAW,CAC7C,MAAM7B,EAAQuB,IAEdE,EAAYzB,EAAM,MAAM,EACxBI,EAAeL,EAAgBC,EAAO6B,EAAU,IAAI,CAAC,CACzD,CAAG,CACH,CAEA,SAASJ,EAAYE,EAAY,CAC/B,MAAMG,EAAsB,SAAS,eAAe,0BAA0B,EAE1EH,GAAc9B,EAChBiC,EAAoB,UAAU,IAAI,QAAQ,EAE1CA,EAAoB,UAAU,OAAO,QAAQ,EAG/ChC,EAAW,cAAc6B,CAAU,CACrC,CAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAM3B,EAAQuB,IAEdG,EAAe1B,EAAM,MAAM,EAE3BI,EAAeL,EAAgBC,EAAO,CAAC,CAAC,CAC1C,CAAC"}
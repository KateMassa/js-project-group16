{"version":3,"file":"commonHelpers2.js","sources":["../src/img/book-pile.png","../src/js/shopping-list.js"],"sourcesContent":["export default \"__VITE_ASSET__3d9f7203__\"","import Pagination from 'tui-pagination';\nimport { deleteFromLS, loadFromLS } from './localStorage';\n\nimport 'tui-pagination/dist/tui-pagination.css'\n\nimport amazonIcon from '../img/amazon-default.png';\nimport appleIcon from '../img/book-default.png';\nimport booksIcon from '../img/book-pile.png';\n\nconst PAGE_SIZE = 3;\nlet pagination;\n\nfunction getBooksForPage(books, page) {\n  const startIndex = (page - 1) * PAGE_SIZE;\n  const endIndex = startIndex + PAGE_SIZE;\n  return books.slice(startIndex, endIndex);\n}\n\nfunction renderShopList(data) {\n  const shoppingList = document.querySelector('.shopping-list');\n\n  if (!shoppingList) {\n    console.error(\"Element with class 'shopping-list' not found.\");\n    return;\n  }\n\n  if (data.length === 0) {\n    shoppingList.classList.add('empty-page-content');\n  } else {\n    shoppingList.classList.remove('empty-page-content');\n    // Render shopping list data here\n  }\n\n  shoppingList.innerHTML = '';\n  const defaultMarkup = `<p class=\"shopping-list-empty-text\">This page is empty, add some books and proceed to order.</p>\n          <img\n          class=\"no-book\"\n          src=\"${booksIcon}\"\n          alt=\"Book\"\n          />`;\n  const markup = data\n    .map(\n      ({\n        book_image,\n        title,\n        author,\n        _id,\n        description,\n        list_name,\n        buy_links\n      }) => {\n        let amazonLink;\n        let appleBookLink;\n\n        buy_links.forEach(link => {\n          if (link.name === 'Amazon') {\n            amazonLink = link.url;\n          } else if (link.name === 'Apple Books') {\n            appleBookLink = link.url;\n          }\n        });\n        return `<li class=\"one-book\">\n                  <img\n                      class=\"img-book\"\n                      src=\"${book_image}\"\n                      alt=\"Book\"\n                  />\n                  <div class=\"description\">\n                      <div class=\"up-part\">\n                        <h2 class=\"book-name\">${title}</h2>\n                        <h3 class=\"type-name\">${list_name}</h3>\n\n                        <button data-id=\"${_id}\" class=\"basket\" type=\"button\">\n                            <svg class=\"trash\" width=\"16\" height=\"16\">\n                            <use href=\"./img/icons.svg#icon-trash\"></use>\n                            </svg>\n                        </button>\n                      </div>\n                      <p class=\"text-description\">\n                      ${description}\n                      </p>\n\n                      <div class=\"book-app\">\n                        <h3 class=\"name-author\">${author}</h3>\n                        <div class=\"book-links\">\n                          <a href=\"${amazonLink}\" class=\"book-links-amazon\" target=\"_blank\"></a>\n                          <a href=\"${appleBookLink}\" class=\"book-links-applebook\" target=\"_blank\"></a>\n                        </div>\n                      </div>\n                  </div>\n                  </li>`;\n      }\n    )\n    .join('');\n\n  shoppingList.innerHTML = data.length > 0 ? markup : defaultMarkup;\n\n  const booksItems = document.querySelectorAll('.shopping-list .basket');\n\n  booksItems.forEach(item => {\n    const bookId = item.getAttribute('data-id');\n    item.addEventListener('click', () => {\n      deleteFromLS(bookId);\n      const updatedBooks = loadFromLS();\n      let currentPage = pagination.getCurrentPage();\n\n      updatePages(updatedBooks.length);\n\n      if ((currentPage - 1) * PAGE_SIZE >= updatedBooks.length) {\n        currentPage -= 1;\n        pagination.movePageTo(currentPage);\n      } else {\n        renderShopList(getBooksForPage(updatedBooks, currentPage));\n      }\n    });\n  });\n}\n\nfunction initPagination(booksCount) {\n  pagination = new Pagination('tui-pagination-container', {\n        totalItems: booksCount,\n        itemsPerPage: PAGE_SIZE,\n        visiblePages: 3,\n        usageStatistics: false\n  });\n\n  updatePages(booksCount);\n  \n  pagination.on('afterMove', function(eventData) {\n    const books = loadFromLS();\n\n    updatePages(books.length);\n    renderShopList(getBooksForPage(books, eventData.page));\n  });\n}\n\nfunction updatePages(booksCount) {\n  const paginationContainer = document.getElementById('tui-pagination-container');\n\n  if (booksCount <= PAGE_SIZE) {\n    paginationContainer.classList.add('hidden');\n  } else {\n    paginationContainer.classList.remove('hidden');\n  }\n\n  pagination.setTotalItems(booksCount);\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const books = loadFromLS();\n\n  initPagination(books.length);\n\n  renderShopList(getBooksForPage(books, 1));\n});\n"],"names":["booksIcon","PAGE_SIZE","pagination","getBooksForPage","books","page","startIndex","endIndex","renderShopList","data","shoppingList","defaultMarkup","markup","book_image","title","author","_id","description","list_name","buy_links","amazonLink","appleBookLink","link","item","bookId","deleteFromLS","updatedBooks","loadFromLS","currentPage","updatePages","initPagination","booksCount","Pagination","eventData","paginationContainer"],"mappings":"gGAAA,MAAeA,EAAA,oDCSTC,EAAY,EAClB,IAAIC,EAEJ,SAASC,EAAgBC,EAAOC,EAAM,CACpC,MAAMC,GAAcD,EAAO,GAAKJ,EAC1BM,EAAWD,EAAaL,EAC9B,OAAOG,EAAM,MAAME,EAAYC,CAAQ,CACzC,CAEA,SAASC,EAAeC,EAAM,CAC5B,MAAMC,EAAe,SAAS,cAAc,gBAAgB,EAE5D,GAAI,CAACA,EAAc,CACjB,QAAQ,MAAM,+CAA+C,EAC7D,MACD,CAEGD,EAAK,SAAW,EAClBC,EAAa,UAAU,IAAI,oBAAoB,EAE/CA,EAAa,UAAU,OAAO,oBAAoB,EAIpDA,EAAa,UAAY,GACzB,MAAMC,EAAgB;AAAA;AAAA;AAAA,iBAGPX,CAAS;AAAA;AAAA,cAGlBY,EAASH,EACZ,IACC,CAAC,CACC,WAAAI,EACA,MAAAC,EACA,OAAAC,EACA,IAAAC,EACA,YAAAC,EACA,UAAAC,EACA,UAAAC,CACR,IAAY,CACJ,IAAIC,EACAC,EAEJ,OAAAF,EAAU,QAAQG,GAAQ,CACpBA,EAAK,OAAS,SAChBF,EAAaE,EAAK,IACTA,EAAK,OAAS,gBACvBD,EAAgBC,EAAK,IAEjC,CAAS,EACM;AAAA;AAAA;AAAA,6BAGcT,CAAU;AAAA;AAAA;AAAA;AAAA;AAAA,gDAKSC,CAAK;AAAA,gDACLI,CAAS;AAAA;AAAA,2CAEdF,CAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAOtBC,CAAW;AAAA;AAAA;AAAA;AAAA,kDAIeF,CAAM;AAAA;AAAA,qCAEnBK,CAAU;AAAA,qCACVC,CAAa;AAAA;AAAA;AAAA;AAAA,wBAK3C,CACF,EACA,KAAK,EAAE,EAEVX,EAAa,UAAYD,EAAK,OAAS,EAAIG,EAASD,EAEjC,SAAS,iBAAiB,wBAAwB,EAE1D,QAAQY,GAAQ,CACzB,MAAMC,EAASD,EAAK,aAAa,SAAS,EAC1CA,EAAK,iBAAiB,QAAS,IAAM,CACnCE,EAAaD,CAAM,EACnB,MAAME,EAAeC,IACrB,IAAIC,EAAc1B,EAAW,iBAE7B2B,EAAYH,EAAa,MAAM,GAE1BE,EAAc,GAAK3B,GAAayB,EAAa,QAChDE,GAAe,EACf1B,EAAW,WAAW0B,CAAW,GAEjCpB,EAAeL,EAAgBuB,EAAcE,CAAW,CAAC,CAEjE,CAAK,CACL,CAAG,CACH,CAEA,SAASE,EAAeC,EAAY,CAClC7B,EAAa,IAAI8B,EAAW,2BAA4B,CAClD,WAAYD,EACZ,aAAc9B,EACd,aAAc,EACd,gBAAiB,EACzB,CAAG,EAED4B,EAAYE,CAAU,EAEtB7B,EAAW,GAAG,YAAa,SAAS+B,EAAW,CAC7C,MAAM7B,EAAQuB,IAEdE,EAAYzB,EAAM,MAAM,EACxBI,EAAeL,EAAgBC,EAAO6B,EAAU,IAAI,CAAC,CACzD,CAAG,CACH,CAEA,SAASJ,EAAYE,EAAY,CAC/B,MAAMG,EAAsB,SAAS,eAAe,0BAA0B,EAE1EH,GAAc9B,EAChBiC,EAAoB,UAAU,IAAI,QAAQ,EAE1CA,EAAoB,UAAU,OAAO,QAAQ,EAG/ChC,EAAW,cAAc6B,CAAU,CACrC,CAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAM3B,EAAQuB,IAEdG,EAAe1B,EAAM,MAAM,EAE3BI,EAAeL,EAAgBC,EAAO,CAAC,CAAC,CAC1C,CAAC"}